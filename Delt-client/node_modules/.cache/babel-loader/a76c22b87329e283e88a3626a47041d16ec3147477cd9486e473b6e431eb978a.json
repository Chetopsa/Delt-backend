{"ast":null,"code":"import React,{useState,useLayoutEffect}from'react';import{Link,useNavigate}from'react-router-dom';import{IoMenu,IoClose}from'react-icons/io5';// Icons for the hamburger menu and close icon\nimport{requestAuth}from'../utils/requestAuth';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Navbar(){const[isOpen,setIsOpen]=useState(false);const[admin,setAdmin]=useState(false);const navigate=useNavigate();// Toggle the menu on click\nconst toggleMenu=()=>setIsOpen(!isOpen);// logout function\nconst logout=async()=>{try{const response=await fetch(process.env.REACT_APP_BACKENDURL+'/api/logout',{method:'POST',credentials:'include',// Include session cookies\nheaders:{'Content-Type':'application/json'}});if(response.ok){// On success, redirect to the login page\nnavigate('/login');}else{console.error('Logout failed:',await response.text());}}catch(error){console.error('Error during logout:',error);}};// const {validated} = useValidation();\n// console.log(\"protected routes \" + validated);\n// // Handle loading state if validation is still being checked\n// if (validated === null) {\n//     return <div>Loading...</div>; // replace with loading ui\n// }\n// console.log(\"validated value right after declaration:  \" + validated);\nuseLayoutEffect(()=>{(async()=>{const validation=await requestAuth();// console.log(\"isValidated: \" + isValidated);\nif(validation.isAdmin){setAdmin(true);}else{setAdmin(false);}})();},[]);return/*#__PURE__*/_jsxs(\"nav\",{className:\"bg-purple-700 text-white p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto flex justify-between items-center\",children:[/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"text-2xl font-bold text-yellow-400\",children:\"Delts Dine\"}),/*#__PURE__*/_jsx(\"div\",{className:\"lg:hidden\",children:/*#__PURE__*/_jsx(\"button\",{onClick:toggleMenu,className:\"text-2xl\",children:isOpen?/*#__PURE__*/_jsx(IoClose,{}):/*#__PURE__*/_jsx(IoMenu,{})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"hidden lg:flex space-x-4\",children:[/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"hover:text-purple-300 transition duration-200\",children:\"Home\"}),/*#__PURE__*/_jsx(Link,{to:\"/login\",className:\"hover:text-purple-300 transition duration-200\",children:\"Login\"}),/*#__PURE__*/_jsx(Link,{to:\"/menu\",className:\"hover:text-purple-300 transition duration-200\",children:\"Menu\"}),admin&&/*#__PURE__*/_jsx(Link,{to:\"/adminDashboard\",className:\"hover:text-purple-300 transition duration-200\",children:\"Admin Dashboard\"}),/*#__PURE__*/_jsx(\"button\",{onClick:logout,className:\"hover:text-purple-300 transition duration-200\",children:\"Logout\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:`lg:hidden ${isOpen?'block':'hidden'} bg-purple-700`,children:/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4 px-4 py-2\",children:[/*#__PURE__*/_jsx(Link,{to:\"/\",onClick:()=>setIsOpen(false),className:\"block text-lg hover:text-purple-300 transition duration-200\",children:\"Home\"}),/*#__PURE__*/_jsx(Link,{to:\"/login\",onClick:()=>setIsOpen(false),className:\"block text-lg hover:text-purple-300 transition duration-200\",children:\"Login\"}),/*#__PURE__*/_jsx(Link,{to:\"/menu\",onClick:()=>setIsOpen(false),className:\"block text-lg hover:text-purple-300 transition duration-200\",children:\"Menu\"}),admin&&/*#__PURE__*/_jsx(Link,{to:\"/adminDashboard\",onClick:()=>setIsOpen(false),className:\"block text-lg hover:text-purple-300 transition duration-200\",children:\"Admin Panel\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{logout();setIsOpen(false);},className:\"block text-lg hover:text-purple-300 transition duration-200\",children:\"Logout\"})]})})]});}export default Navbar;","map":{"version":3,"names":["React","useState","useLayoutEffect","Link","useNavigate","IoMenu","IoClose","requestAuth","jsx","_jsx","jsxs","_jsxs","Navbar","isOpen","setIsOpen","admin","setAdmin","navigate","toggleMenu","logout","response","fetch","process","env","REACT_APP_BACKENDURL","method","credentials","headers","ok","console","error","text","validation","isAdmin","className","children","to","onClick"],"sources":["/Users/chestonopsasnick/Documents/Coding_Projects/Delt-backend/Delt-client/src/components/Navbar.js"],"sourcesContent":["import React, { useState, useLayoutEffect } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { IoMenu, IoClose } from 'react-icons/io5';  // Icons for the hamburger menu and close icon\nimport { requestAuth } from '../utils/requestAuth';\n\n\n\nfunction Navbar() {\n  const [isOpen, setIsOpen] = useState(false);\n  const [admin, setAdmin] = useState(false);\n\n  const navigate = useNavigate();\n\n  // Toggle the menu on click\n  const toggleMenu = () => setIsOpen(!isOpen);\n\n  // logout function\n  const logout = async () => {\n    try {\n      const response = await fetch(process.env.REACT_APP_BACKENDURL +'/api/logout', {\n        method: 'POST',\n        credentials: 'include', // Include session cookies\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      });\n      if (response.ok) {\n        // On success, redirect to the login page\n        navigate('/login');\n      } else {\n        console.error('Logout failed:', await response.text());\n      }\n    } catch (error) {\n      console.error('Error during logout:', error);\n    }\n  };\n\n\n    \n    // const {validated} = useValidation();\n    // console.log(\"protected routes \" + validated);\n    // // Handle loading state if validation is still being checked\n\n    // if (validated === null) {\n    //     return <div>Loading...</div>; // replace with loading ui\n    // }\n    \n    // console.log(\"validated value right after declaration:  \" + validated);\n\n    useLayoutEffect( () => {\n      (async () => {\n        const validation = await requestAuth();\n        // console.log(\"isValidated: \" + isValidated);\n        if (validation.isAdmin) {\n          setAdmin(true);\n        } else {\n          setAdmin(false);\n        }\n      })();\n    }, []);\n\n  return (\n    <nav className=\"bg-purple-700 text-white p-4\">\n      <div className=\"container mx-auto flex justify-between items-center\">\n        {/* Logo */}\n        <Link to=\"/\" className=\"text-2xl font-bold text-yellow-400\">\n          Delts Dine\n        </Link>\n\n        {/* Hamburger Icon for Mobile */}\n        <div className=\"lg:hidden\">\n          <button onClick={toggleMenu} className=\"text-2xl\">\n            {isOpen ? <IoClose /> : <IoMenu />}\n          </button>\n        </div>\n\n        {/* Desktop Navigation Links */}\n        <div className=\"hidden lg:flex space-x-4\">\n          <Link\n            to=\"/\"\n            className=\"hover:text-purple-300 transition duration-200\"\n          >\n            Home\n          </Link>\n          <Link\n            to=\"/login\"\n            className=\"hover:text-purple-300 transition duration-200\"\n          >\n            Login\n          </Link>\n          <Link\n            to=\"/menu\"\n            className=\"hover:text-purple-300 transition duration-200\"\n          >\n            Menu\n          </Link>\n          {admin && (\n            <Link\n              to=\"/adminDashboard\"\n              className=\"hover:text-purple-300 transition duration-200\"\n            >\n              Admin Dashboard\n            </Link>\n          )}\n          \n          <button\n            onClick={logout}\n            className=\"hover:text-purple-300 transition duration-200\"\n          >\n            Logout\n          </button>\n        </div>\n      </div>\n\n      {/* Mobile Menu Links (visible when isOpen is true) */}\n      <div className={`lg:hidden ${isOpen ? 'block' : 'hidden'} bg-purple-700`}>\n        <div className=\"space-y-4 px-4 py-2\">\n          <Link\n            to=\"/\"\n            onClick={() => setIsOpen(false)}\n            className=\"block text-lg hover:text-purple-300 transition duration-200\"\n          >\n            Home\n          </Link>\n          <Link\n            to=\"/login\"\n            onClick={() => setIsOpen(false)}\n            className=\"block text-lg hover:text-purple-300 transition duration-200\"\n          >\n            Login\n          </Link>\n          <Link\n            to=\"/menu\"\n            onClick={() => setIsOpen(false)}\n            className=\"block text-lg hover:text-purple-300 transition duration-200\"\n          >\n            Menu\n          </Link>\n\n          {admin && (\n            <Link\n            to=\"/adminDashboard\"\n            onClick={() => setIsOpen(false)}\n            className=\"block text-lg hover:text-purple-300 transition duration-200\"\n          >\n            Admin Panel\n          </Link>\n          )}\n          <button\n            onClick={() => {\n              logout();\n              setIsOpen(false);\n            }}\n            className=\"block text-lg hover:text-purple-300 transition duration-200\"\n          >\n            Logout\n          </button>\n        </div>\n      </div>\n    </nav>\n  );\n}\n\nexport default Navbar;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}